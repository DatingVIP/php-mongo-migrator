version : '2'

services:
  mongodb30:
    container_name: phpmongo_mongo30
    image: mongo:3.0
    volumes:
      - ../share/mongo30:/data/db
  mongodb32:
    container_name: phpmongo_mongo32
    image: mongo:3.2
    volumes:
      - ../share/mongo32:/data/db
  mongodb33:
    container_name: phpmongo_mongo33
    image: mongo:3.3
    volumes:
      - ../share/mongo33:/data/db
  mongodb34:
    container_name: phpmongo_mongo34
    image: mongo:3.4
    volumes:
      - ../share/mongo34:/data/db
  php73:
    image: php:7.3
    container_name: phpmongo_php73
    command: bash /phpmongo/docker/bootstrap.sh
    depends_on:
      - mongodb30
      - mongodb32
      - mongodb33
      - mongodb34
    volumes:
      - ..:/phpmongo
      - ./php.ini:/usr/local/etc/php/php.ini
    environment:
      PHP_IDE_CONFIG: "serverName=phpmongo"
      XDEBUG_CONFIG: "idekey=PHPSTORM remote_autostart=1 remote_enable=1 remote_host=dockerhost remote_port=9001"
      PHPMONGO_DSN: monfodb://mongodb34
